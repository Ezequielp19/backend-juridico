"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9024],{9024:($,E,c)=>{c.r(E),c.d(E,{UserDetailPage:()=>D});var m=c(1528),G=c(1368),l=c(2112),r=c(4716),C=c(7808),O=c(3252),i=c(4496),F=c(2508),Y=c(9944),U=c(1496);function T(a,_){if(1&a){const n=i.KQA();i.I0R(0,"div")(1,"form",14),i.qCj("ngSubmit",function(){i.usT(n);const o=i.GaO();return i.CGJ(o.saveUsuario())}),i.I0R(2,"ion-item")(3,"ion-label",15),i.OEk(4,"DNI"),i.C$Y(),i.wR5(5,"ion-input",16),i.C$Y(),i.I0R(6,"ion-item")(7,"ion-label",15),i.OEk(8,"Contrase\xf1a"),i.C$Y(),i.wR5(9,"ion-input",17),i.C$Y(),i.I0R(10,"ion-button",18),i.OEk(11,"Guardar"),i.C$Y()()()}if(2&a){const n=i.GaO();i.yG2(),i.E7m("formGroup",n.usuarioForm),i.yG2(9),i.E7m("disabled",n.usuarioForm.invalid)}}function y(a,_){if(1&a){const n=i.KQA();i.I0R(0,"div")(1,"form",14),i.qCj("ngSubmit",function(){i.usT(n);const o=i.GaO();return i.CGJ(o.saveAfip())}),i.I0R(2,"ion-item")(3,"ion-label",15),i.OEk(4,"CUIT"),i.C$Y(),i.wR5(5,"ion-input",19),i.C$Y(),i.I0R(6,"ion-item")(7,"ion-label",15),i.OEk(8,"Clave Fiscal"),i.C$Y(),i.wR5(9,"ion-input",20),i.C$Y(),i.I0R(10,"ion-button",18),i.OEk(11,"Guardar"),i.C$Y()()()}if(2&a){const n=i.GaO();i.yG2(),i.E7m("formGroup",n.afipForm),i.yG2(9),i.E7m("disabled",n.afipForm.invalid)}}function S(a,_){if(1&a){const n=i.KQA();i.I0R(0,"div")(1,"form",14),i.qCj("ngSubmit",function(){i.usT(n);const o=i.GaO();return i.CGJ(o.saveCertificacionIngresos())}),i.I0R(2,"ion-item")(3,"ion-label",15),i.OEk(4,"A\xf1o"),i.C$Y(),i.wR5(5,"ion-input",21),i.C$Y(),i.I0R(6,"ion-item")(7,"ion-label",15),i.OEk(8,"PDF"),i.C$Y(),i.I0R(9,"div",22),i.S2Z(),i.I0R(10,"svg",23),i.wR5(11,"path",24),i.C$Y(),i.gRP(),i.I0R(12,"div",25)(13,"label",26)(14,"input",27),i.qCj("change",function(o){i.usT(n);const t=i.GaO();return i.CGJ(t.uploadFile(o,t.certificacionIngresosForm,"pdf"))}),i.C$Y()()()()(),i.I0R(15,"ion-button",18),i.OEk(16,"Guardar"),i.C$Y()()()}if(2&a){const n=i.GaO();i.yG2(),i.E7m("formGroup",n.certificacionIngresosForm),i.yG2(14),i.E7m("disabled",n.certificacionIngresosForm.invalid)}}function A(a,_){if(1&a){const n=i.KQA();i.I0R(0,"div")(1,"form",14),i.qCj("ngSubmit",function(){i.usT(n);const o=i.GaO();return i.CGJ(o.savePlanesPago())}),i.I0R(2,"ion-item")(3,"ion-label",15),i.OEk(4,"PDF"),i.C$Y(),i.I0R(5,"div",22),i.S2Z(),i.I0R(6,"svg",23),i.wR5(7,"path",24),i.C$Y(),i.gRP(),i.I0R(8,"div",25)(9,"label",26)(10,"input",27),i.qCj("change",function(o){i.usT(n);const t=i.GaO();return i.CGJ(t.uploadFile(o,t.planesPagoForm,"pdf"))}),i.C$Y()()()()(),i.I0R(11,"ion-button",18),i.OEk(12,"Guardar"),i.C$Y()()()}if(2&a){const n=i.GaO();i.yG2(),i.E7m("formGroup",n.planesPagoForm),i.yG2(10),i.E7m("disabled",n.planesPagoForm.invalid)}}function k(a,_){if(1&a){const n=i.KQA();i.I0R(0,"div")(1,"form",14),i.qCj("ngSubmit",function(){i.usT(n);const o=i.GaO();return i.CGJ(o.saveInformacionPersonal())}),i.I0R(2,"ion-item")(3,"ion-label",15),i.OEk(4,"Nombre"),i.C$Y(),i.wR5(5,"ion-input",28),i.C$Y(),i.I0R(6,"ion-item")(7,"ion-label",15),i.OEk(8,"Apellido"),i.C$Y(),i.wR5(9,"ion-input",29),i.C$Y(),i.I0R(10,"ion-item")(11,"ion-label",15),i.OEk(12,"Direcci\xf3n"),i.C$Y(),i.wR5(13,"ion-input",30),i.C$Y(),i.I0R(14,"ion-item")(15,"ion-label",15),i.OEk(16,"Otros Detalles"),i.C$Y(),i.wR5(17,"ion-input",31),i.C$Y(),i.I0R(18,"ion-item")(19,"ion-label",15),i.OEk(20,"PDF"),i.C$Y(),i.I0R(21,"div",22),i.S2Z(),i.I0R(22,"svg",23),i.wR5(23,"path",24),i.C$Y(),i.gRP(),i.I0R(24,"div",25)(25,"label",26)(26,"input",27),i.qCj("change",function(o){i.usT(n);const t=i.GaO();return i.CGJ(t.uploadFile(o,t.informacionPersonalForm,"pdf"))}),i.C$Y()()()()(),i.I0R(27,"ion-button",18),i.OEk(28,"Guardar"),i.C$Y()()()}if(2&a){const n=i.GaO();i.yG2(),i.E7m("formGroup",n.informacionPersonalForm),i.yG2(26),i.E7m("disabled",n.informacionPersonalForm.invalid)}}function x(a,_){if(1&a){const n=i.KQA();i.I0R(0,"div")(1,"form",14),i.qCj("ngSubmit",function(){i.usT(n);const o=i.GaO();return i.CGJ(o.saveFacturacion())}),i.I0R(2,"ion-item")(3,"ion-label",15),i.OEk(4,"Cliente"),i.C$Y(),i.wR5(5,"ion-input",32),i.C$Y(),i.I0R(6,"ion-item")(7,"ion-label",15),i.OEk(8,"Facturas"),i.C$Y(),i.wR5(9,"ion-input",33),i.C$Y(),i.I0R(10,"ion-item")(11,"ion-label",15),i.OEk(12,"PDF"),i.C$Y(),i.I0R(13,"div",22),i.S2Z(),i.I0R(14,"svg",23),i.wR5(15,"path",24),i.C$Y(),i.gRP(),i.I0R(16,"div",25)(17,"label",26)(18,"input",27),i.qCj("change",function(o){i.usT(n);const t=i.GaO();return i.CGJ(t.uploadFile(o,t.facturacionForm,"pdf"))}),i.C$Y()()()()(),i.I0R(19,"ion-button",18),i.OEk(20,"Guardar"),i.C$Y()()()}if(2&a){const n=i.GaO();i.yG2(),i.E7m("formGroup",n.facturacionForm),i.yG2(18),i.E7m("disabled",n.facturacionForm.invalid)}}function M(a,_){if(1&a){const n=i.KQA();i.I0R(0,"div")(1,"form",14),i.qCj("ngSubmit",function(){i.usT(n);const o=i.GaO();return i.CGJ(o.saveDeclaracionJurada())}),i.I0R(2,"ion-item")(3,"ion-label",15),i.OEk(4,"PDF"),i.C$Y(),i.I0R(5,"div",22),i.S2Z(),i.I0R(6,"svg",23),i.wR5(7,"path",24),i.C$Y(),i.gRP(),i.I0R(8,"div",25)(9,"label",26)(10,"input",27),i.qCj("change",function(o){i.usT(n);const t=i.GaO();return i.CGJ(t.uploadFile(o,t.declaracionJuradaForm,"pdf"))}),i.C$Y()()()()(),i.I0R(11,"ion-button",18),i.OEk(12,"Guardar"),i.C$Y()()()}if(2&a){const n=i.GaO();i.yG2(),i.E7m("formGroup",n.declaracionJuradaForm),i.yG2(10),i.E7m("disabled",n.declaracionJuradaForm.invalid)}}let D=(()=>{var a;class _{constructor(e,o,t,s,u){this.route=e,this.navCtrl=o,this.fb=t,this.firestoreService=s,this.storage=u,this.activeSection="usuario"}ngOnInit(){this.userId=this.route.snapshot.paramMap.get("id"),this.usuarioForm=this.fb.group({dni:["",r.AQ.required],password:["",r.AQ.required]}),this.afipForm=this.fb.group({cuit:["",r.AQ.required],claveFiscal:["",r.AQ.required]}),this.certificacionIngresosForm=this.fb.group({anio:["",r.AQ.required],pdf:["",r.AQ.required]}),this.planesPagoForm=this.fb.group({pdf:["",r.AQ.required]}),this.informacionPersonalForm=this.fb.group({nombre:["",r.AQ.required],apellido:["",r.AQ.required],direccion:["",r.AQ.required],otrosDetalles:[""],pdf:["",r.AQ.required]}),this.facturacionForm=this.fb.group({cliente:["",r.AQ.required],facturas:["",r.AQ.required],pdf:["",r.AQ.required]}),this.declaracionJuradaForm=this.fb.group({pdf:["",r.AQ.required]}),this.loadUserData()}loadUserData(){this.firestoreService.getDocumentChanges(`Usuarios/${this.userId}`).subscribe(e=>{var o,t,s,u,p,f,I,d,g,v,h,b,P,R;e&&(this.usuarioForm.patchValue({dni:e.dni,password:e.password}),this.afipForm.patchValue({cuit:null===(o=e.afip)||void 0===o?void 0:o.cuit,claveFiscal:null===(t=e.afip)||void 0===t?void 0:t.claveFiscal}),this.certificacionIngresosForm.patchValue({anio:null===(s=e.certificacionIngresos)||void 0===s?void 0:s.anio,pdf:null===(u=e.certificacionIngresos)||void 0===u?void 0:u.pdf}),this.planesPagoForm.patchValue({pdf:null===(p=e.planesPago)||void 0===p?void 0:p.pdf}),this.informacionPersonalForm.patchValue({nombre:null===(f=e.informacionPersonal)||void 0===f?void 0:f.nombre,apellido:null===(I=e.informacionPersonal)||void 0===I?void 0:I.apellido,direccion:null===(d=e.informacionPersonal)||void 0===d?void 0:d.direccion,otrosDetalles:null===(g=e.informacionPersonal)||void 0===g?void 0:g.otrosDetalles,pdf:null===(v=e.informacionPersonal)||void 0===v?void 0:v.pdf}),this.facturacionForm.patchValue({cliente:null===(h=e.facturacion)||void 0===h?void 0:h.cliente,facturas:null===(b=e.facturacion)||void 0===b?void 0:b.facturas,pdf:null===(P=e.facturacion)||void 0===P?void 0:P.pdf}),this.declaracionJuradaForm.patchValue({pdf:null===(R=e.declaracionJurada)||void 0===R?void 0:R.pdf}))})}uploadFile(e,o,t){var s=this;return(0,m.c)(function*(){const u=e.target.files[0],f=(0,C.IL)(s.storage,`archivos/${u.name}`);(0,C.GY)(f,u).on("state_changed",d=>{const g=d.bytesTransferred/d.totalBytes*100;s.uploadProgress$=new O._(v=>{v.next(g),v.complete()}),console.log("Progreso de la carga:",g)},d=>{console.error("Error al cargar el archivo:",d)},(0,m.c)(function*(){const d=yield(0,C.Kq)(f);console.log("URL del archivo:",d),o.patchValue({[t]:d})}))})()}saveUsuario(){this.firestoreService.updateDocument(this.usuarioForm.value,"Usuarios",this.userId).then(()=>{console.log("Usuario guardado",this.usuarioForm.value)})}saveAfip(){var e=this;return(0,m.c)(function*(){yield e.saveSubcollectionData(e.afipForm,"AFIP")})()}saveCertificacionIngresos(){var e=this;return(0,m.c)(function*(){yield e.saveSubcollectionData(e.certificacionIngresosForm,"certIngreso")})()}savePlanesPago(){var e=this;return(0,m.c)(function*(){yield e.saveSubcollectionData(e.planesPagoForm,"planPago")})()}saveInformacionPersonal(){var e=this;return(0,m.c)(function*(){yield e.saveSubcollectionData(e.informacionPersonalForm,"infoPersonal")})()}saveFacturacion(){var e=this;return(0,m.c)(function*(){yield e.saveSubcollectionData(e.facturacionForm,"facturacion")})()}saveDeclaracionJurada(){var e=this;return(0,m.c)(function*(){yield e.saveSubcollectionData(e.declaracionJuradaForm,"declaracionJurada")})()}saveSubcollectionData(e,o){var t=this;return(0,m.c)(function*(){const s=`Usuarios/${t.userId}`,u=yield t.firestoreService.getDocumentIdInSubcollection(s,o);u?t.firestoreService.updateDocument(e.value,`${s}/${o}`,u).then(()=>{console.log(`${o} guardado`,e.value)}):console.error(`No se encontr\xf3 documento en la subcolecci\xf3n ${o}`)})()}goBack(){window.history.back()}}return(a=_).\u0275fac=function(e){return new(e||a)(i.GI1(F.gV),i.GI1(Y.wX),i.GI1(r.im),i.GI1(U.Y),i.GI1(C.u_))},a.\u0275cmp=i.In1({type:a,selectors:[["app-user-detail"]],standalone:!0,features:[i.UHJ],decls:37,vars:8,consts:[["slot","start"],[3,"click"],["name","arrow-back"],[1,"ion-text-center"],[1,"ion-padding"],[3,"ngModel","ngModelChange"],["value","usuario"],["value","afip"],["value","certificacion-ingresos"],["value","planes-pago"],["value","informacion-personal"],["value","facturacion"],["value","declaracion-jurada"],[4,"ngIf"],[3,"formGroup","ngSubmit"],["position","floating"],["formControlName","dni"],["formControlName","password","type","password"],["expand","block","type","submit",3,"disabled"],["formControlName","cuit"],["formControlName","claveFiscal"],["formControlName","anio"],[1,"text-center"],["viewBox","0 0 24 24","fill","currentColor","aria-hidden","true",1,"mx-auto","h-12","w-12","text-gray-300"],["fill-rule","evenodd","d","M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule","evenodd"],[1,"mt-4","flex","text-sm","leading-6","text-gray-600"],["for","file-upload-certificacion-ingresos",1,"relative","cursor-pointer","rounded-md","bg-white","font-semibold","text-indigo-600","focus-within:outline-none","focus-within:ring-2","focus-within:ring-indigo-600","focus-within:ring-offset-2","hover:text-indigo-500"],["id","file-upload-certificacion-ingresos","name","file-upload","type","file",1,"sr-only",3,"change"],["formControlName","nombre"],["formControlName","apellido"],["formControlName","direccion"],["formControlName","otrosDetalles"],["formControlName","cliente"],["formControlName","facturas"]],template:function(e,o){1&e&&(i.I0R(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),i.qCj("click",function(){return o.goBack()}),i.wR5(4,"ion-icon",2),i.C$Y()(),i.I0R(5,"ion-title",3),i.OEk(6,"Editar Usuario"),i.C$Y()()(),i.I0R(7,"ion-content",4)(8,"ion-segment",5),i.iHE("ngModelChange",function(s){return i.kNx(o.activeSection,s)||(o.activeSection=s),s}),i.I0R(9,"ion-segment-button",6)(10,"ion-label"),i.OEk(11,"Usuario"),i.C$Y()(),i.I0R(12,"ion-segment-button",7)(13,"ion-label"),i.OEk(14,"AFIP"),i.C$Y()(),i.I0R(15,"ion-segment-button",8)(16,"ion-label"),i.OEk(17,"Certificaci\xf3n de Ingresos"),i.C$Y()(),i.I0R(18,"ion-segment-button",9)(19,"ion-label"),i.OEk(20,"Planes de Pago"),i.C$Y()(),i.I0R(21,"ion-segment-button",10)(22,"ion-label"),i.OEk(23,"Informaci\xf3n Personal"),i.C$Y()(),i.I0R(24,"ion-segment-button",11)(25,"ion-label"),i.OEk(26,"Facturaci\xf3n"),i.C$Y()(),i.I0R(27,"ion-segment-button",12)(28,"ion-label"),i.OEk(29,"Declaraci\xf3n Jurada"),i.C$Y()()(),i.yuY(30,T,12,2,"div",13)(31,y,12,2,"div",13)(32,S,17,2,"div",13)(33,A,13,2,"div",13)(34,k,29,2,"div",13)(35,x,21,2,"div",13)(36,M,13,2,"div",13),i.C$Y()),2&e&&(i.yG2(8),i.OKB("ngModel",o.activeSection),i.yG2(22),i.E7m("ngIf","usuario"===o.activeSection),i.yG2(),i.E7m("ngIf","afip"===o.activeSection),i.yG2(),i.E7m("ngIf","certificacion-ingresos"===o.activeSection),i.yG2(),i.E7m("ngIf","planes-pago"===o.activeSection),i.yG2(),i.E7m("ngIf","informacion-personal"===o.activeSection),i.yG2(),i.E7m("ngIf","facturacion"===o.activeSection),i.yG2(),i.E7m("ngIf","declaracion-jurada"===o.activeSection))},dependencies:[G.MD,G.u_,l.wZ,l.sn,l.GS,l._i,l.wB,l.Ko,l.A5,l.Yb,l.QR,l._4,l.Wl,l.tM,l.Md,l.IT,l.qG,r.y,r.sz,r.ue,r.u,r._G,r.sl,r.uW,r.Wo],styles:[".user-detail-segment[_ngcontent-%COMP%]{margin-bottom:20px}.form-section[_ngcontent-%COMP%]{padding:16px;border:1px solid #ccc;border-radius:5px}ion-item[_ngcontent-%COMP%]{margin-bottom:10px}"]}),_})()}}]);